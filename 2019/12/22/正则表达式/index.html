<!DOCTYPE html>
<html lang=Ch>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="十二月的第四周，来学习正则表达式。 工作时经常需要用到正则表达式来校验字符串，每次遇到都怵怵的，这周来扫除一下盲区。  正则表达式（regular expression），根据英文也可简写为 regex。“正则”这个中文翻译颇有民国风度，所谓公正而乎法则，今已查不到何处还在用此词，似乎只有编程领域在用。 正则表达式只用于字符串，用来检查字符串是否符合某种规定（例如只有字母、又例如没有数字等），">
<meta name="keywords" content="Weekly Post,java">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式">
<meta property="og:url" content="http://hellopz.netlify.com/2019/12/22/正则表达式/index.html">
<meta property="og:site_name" content="这里是pz阁下">
<meta property="og:description" content="十二月的第四周，来学习正则表达式。 工作时经常需要用到正则表达式来校验字符串，每次遇到都怵怵的，这周来扫除一下盲区。  正则表达式（regular expression），根据英文也可简写为 regex。“正则”这个中文翻译颇有民国风度，所谓公正而乎法则，今已查不到何处还在用此词，似乎只有编程领域在用。 正则表达式只用于字符串，用来检查字符串是否符合某种规定（例如只有字母、又例如没有数字等），">
<meta property="og:locale" content="Chinese">
<meta property="og:image" content="http://hellopz.netlify.com/assets/1576558383714.png">
<meta property="og:updated_time" content="2019-12-23T00:18:14.300Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="正则表达式">
<meta name="twitter:description" content="十二月的第四周，来学习正则表达式。 工作时经常需要用到正则表达式来校验字符串，每次遇到都怵怵的，这周来扫除一下盲区。  正则表达式（regular expression），根据英文也可简写为 regex。“正则”这个中文翻译颇有民国风度，所谓公正而乎法则，今已查不到何处还在用此词，似乎只有编程领域在用。 正则表达式只用于字符串，用来检查字符串是否符合某种规定（例如只有字母、又例如没有数字等），">
<meta name="twitter:image" content="http://hellopz.netlify.com/assets/1576558383714.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>正则表达式</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/2019/07/21/helloworld/">About</a></li>
         
          <li><a href="/tags/Weekly-Post/">Weekly Post</a></li>
         
          <li><a href="/tags/tips/">Tips</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/12/15/HashMap-与-TreeMap/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://hellopz.netlify.com/2019/12/22/正则表达式/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://hellopz.netlify.com/2019/12/22/正则表达式/&text=正则表达式"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://hellopz.netlify.com/2019/12/22/正则表达式/&is_video=false&description=正则表达式"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#非打印字符"><span class="toc-number">1.</span> <span class="toc-text">非打印字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊字符"><span class="toc-number">2.</span> <span class="toc-text">特殊字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#限定字符"><span class="toc-number">3.</span> <span class="toc-text">限定字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">4.</span> <span class="toc-text">[ ]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-1"><span class="toc-number">5.</span> <span class="toc-text">()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#贪婪"><span class="toc-number">6.</span> <span class="toc-text">贪婪</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        正则表达式
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">这里是pz阁下</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-12-22T11:00:47.000Z" itemprop="datePublished">2019-12-22</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Weekly-Post/">Weekly Post</a>, <a class="tag-link" href="/tags/java/">java</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <br>

<p>十二月的第四周，来学习正则表达式。</p>
<p>工作时经常需要用到正则表达式来校验字符串，每次遇到都怵怵的，这周来扫除一下盲区。</p>
<hr>
<p>正则表达式（regular expression），根据英文也可简写为 regex。“正则”这个中文翻译颇有民国风度，所谓公正而乎法则，今已查不到何处还在用此词，似乎只有编程领域在用。</p>
<p>正则表达式只用于字符串，用来检查字符串是否符合某种规定（例如只有字母、又例如没有数字等），或者是取出符合规定的字符串子串（用于后续替换等）。</p>
<p>例如下图，为匹配以 Hello 开头的字符串的正则表达式，成功匹配到了两条。</p>
<p><img src="/assets/1576558383714.png" alt="1576558383714"></p>
<p>（上图截图自 <a href="https://regexr.com/" target="_blank" rel="noopener">https://regexr.com/</a> 网站，是一个很好用的正则表达式在线测试网站）</p>
<p>此外再安利一组入门正则表达式的视频：<a href="https://www.bilibili.com/video/av18182693?from=search&seid=9361031783812248620" target="_blank" rel="noopener">《表严肃讲正则表达式》</a>，供入门使用。这组视频讲得很用心，不像大部分编程公开课跟倒泔水一样地倾泻几十个小时垃圾，我能感受到它是精心准备过的，很是喜欢。</p>
<br>

<hr>
<p>正则表达式的概念不难理解，若不清晰用过一两次便懂。使用正则表达式若有困难，都是因为语法繁多，需要记忆的内容量大。下面整理了三张正则表达式的常用语法字符表，主要来源为<a href="https://www.runoob.com/regexp/regexp-metachar.html" target="_blank" rel="noopener">菜鸟教程的正则表达式教程</a>。分三张表，分别是：</p>
<ul>
<li>非打印字符：转义后的字符，代表某一类字符</li>
<li>特殊字符：含特殊含义的字符</li>
<li>限定字符：字符次数限制</li>
</ul>
<h2 id="非打印字符"><a href="#非打印字符" class="headerlink" title="非打印字符"></a>非打印字符</h2><table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
<th>正确示例</th>
<th>错误示例</th>
</tr>
</thead>
<tbody><tr>
<td>\w</td>
<td>数字、字母、下划线</td>
<td>1/a/A/_</td>
<td>./&amp;/の/【/<strong>︹</strong><font color="#E0E0E0">(空格)</font>/<strong>ㄱ</strong><font color="#E0E0E0">(换行)</font></td>
</tr>
<tr>
<td>\W</td>
<td>除数字、字母、下划线以外</td>
<td>./&amp;/の/【/<strong>︹</strong><font color="#E0E0E0">(空格)</font>/<strong>ㄱ</strong><font color="#E0E0E0">(换行)</font></td>
<td>1/a/A/_</td>
</tr>
<tr>
<td>\s</td>
<td>空白字符</td>
<td><strong>︹</strong><font color="#E0E0E0">(空格)</font>/<strong>→|</strong><font color="#E0E0E0">(制表符)</font>/<strong>ㄱ</strong><font color="#E0E0E0">(换行)</font>/<strong>☇</strong><font color="#E0E0E0">(换页)</font></td>
<td>1/a/A/_/./&amp;/♂</td>
</tr>
<tr>
<td>\S</td>
<td>除空白字符以外</td>
<td>1/a/A/_/./&amp;/♂/张</td>
<td><strong>︹</strong><font color="#E0E0E0">(空格)</font>/<strong>→|</strong><font color="#E0E0E0">(制表符)</font>/<strong>ㄱ</strong><font color="#E0E0E0">(换行)</font>/<strong>☇</strong><font color="#E0E0E0">(换页)</font></td>
</tr>
<tr>
<td>\d</td>
<td>数字（单个）</td>
<td>1/2/3/4/5/6/7/8/9/0</td>
<td>a/?/&amp;/1234<font color="#E0E0E0">(整体)</font></td>
</tr>
<tr>
<td>\D</td>
<td>除数字以外</td>
<td>a/B/,/%/张/<strong>︹</strong><font color="#E0E0E0">(空格)</font></td>
<td>1/2/3/1234<font color="#E0E0E0">(整体)</font></td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
<td><strong>ㄱ</strong><font color="#E0E0E0">(换行)</font></td>
<td>1/a/A/_/?</td>
</tr>
<tr>
<td>\t</td>
<td>制表符</td>
<td><strong>→|</strong><font color="#E0E0E0">(制表符)</font></td>
<td>1/a/A/_/?</td>
</tr>
</tbody></table>
<br>

<h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><table>
<thead>
<tr>
<th>特殊字符</th>
<th>描述</th>
<th>正确示例</th>
<th>错误示例</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>除换行以外任意字符</td>
<td>1/a/A/%/_</td>
<td><strong>ㄱ</strong><font color="#E0E0E0">(换行)</font>/123<font color="#E0E0E0">(整体)</font></td>
</tr>
<tr>
<td>^</td>
<td>从字符串开始的位置处匹配</td>
<td>^12 -&gt; 12/12<font color="#E0E0E0">3</font>/12<font color="#E0E0E0">a</font></td>
<td>^12 -×-&gt; a12/abc12/</td>
</tr>
<tr>
<td>$</td>
<td>从字符串结束的位置处匹配（倒着）</td>
<td>12$ -&gt; 12/<font color="#E0E0E0">abc</font>12/<font color="#E0E0E0">0</font>12</td>
<td>12$ -×-&gt; 123/12aaa</td>
</tr>
<tr>
<td>|</td>
<td>或</td>
<td>[1|2|3] -&gt; 1/2/3</td>
<td>[1|2|3] -×-&gt; a/4/&amp;</td>
</tr>
<tr>
<td>[]</td>
<td>方框运算符，字符集合/范围/反向</td>
<td></td>
<td></td>
</tr>
<tr>
<td>()</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>{}</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<br>

<h2 id="限定字符"><a href="#限定字符" class="headerlink" title="限定字符"></a>限定字符</h2><table>
<thead>
<tr>
<th>限定字符</th>
<th>描述</th>
<th>正确示例</th>
<th>错误示例</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>匹配零个、一个或多个字符</td>
<td>12*3 -&gt; 13/123/1223</td>
<td>12*3 -×-&gt; 1</td>
</tr>
<tr>
<td>+</td>
<td>匹配一个或多个字符</td>
<td>12+3 -&gt; 123/12223</td>
<td>12+3 -×-&gt; 13</td>
</tr>
<tr>
<td>?</td>
<td>匹配零个或一个字符</td>
<td>12?3 -&gt; 13/123</td>
<td>12?3 -×-&gt; 12223</td>
</tr>
<tr>
<td>{n}</td>
<td>字符限定n次</td>
<td>2{4} -&gt; 2222</td>
<td>2{4} -×-&gt; 222/22222<font color="#E0E0E0">(整体)</font></td>
</tr>
<tr>
<td>{n,}</td>
<td>字符限定最少n次</td>
<td>2{2,} -&gt; 22/222/22222</td>
<td>2{2,} -×-&gt; 2</td>
</tr>
<tr>
<td>{n,m}</td>
<td>字符限定n-m次</td>
<td>2{2,3} -&gt; 22/222</td>
<td>2{2,3} -×-&gt; 2/2222<font color="#E0E0E0">(整体)</font></td>
</tr>
</tbody></table>
<br>

<hr>
<p>除以上常用的语法字符之外，还有以下规则，需要单独注意：</p>
<h2 id><a href="#" class="headerlink" title="[ ]"></a>[ ]</h2><p>方括号表示字符集合，可配合 ^ 符合表示反向的字符集合，常见用法有：</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>[12a]</td>
<td>可匹配 ‘1’ 或 ‘2’ 或 ‘a’</td>
</tr>
<tr>
<td>[1|2|a|,]</td>
<td>可匹配 ‘1’ 或 ‘2’ 或 ‘a’ 或 ‘,’</td>
</tr>
<tr>
<td>[1-9]</td>
<td>可匹配 ‘1’ 或 ‘2’ 或 …… 或 ‘9’</td>
</tr>
<tr>
<td>[a-z]</td>
<td>可匹配 ‘a’ 或 ‘b’ 或 …… 或 ‘z’</td>
</tr>
<tr>
<td>[^12a]</td>
<td>可匹配除了 ‘1’ 或 ‘2’ 或 ‘a’ 以外的字符</td>
</tr>
<tr>
<td>[^1-9]</td>
<td>可匹配除了 ‘1’ 或 ‘2’ 或 …… 或 ‘9’ 以外的字符</td>
</tr>
</tbody></table>
<br>

<h2 id="-1"><a href="#-1" class="headerlink" title="()"></a>()</h2><p>圆括号代表同时匹配多个字符，如匹配 <code>hello</code> 这五个字符，可以使用 <code>(hello)</code> 来匹配。</p>
<p>但是除此之外，() 匹配到的字符串还会被缓存起来，缓存起来的子表达式可以在之后使用。</p>
<p>例如使用<code>([nN]o)</code>匹配 <code>No, get out!</code>，不光能匹配到 <code>No</code>，还能通过 <code>$1oooooooo</code> 将原文替换成 <code>Nooooooooo, get out!</code>。</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>(hello)</td>
<td>可以匹配 “hello”，并缓存起来</td>
</tr>
<tr>
<td>(?:hello)</td>
<td>可以匹配 “hello”，但不缓存结果<br>（用于匹配多字符但并不需要结果，有时能让正则表达式更简洁）</td>
</tr>
<tr>
<td>hello(?=AA)</td>
<td>可以匹配 “helloAA……” 中的 “hello”，但是不能匹配 “helloBB……” 中的 “hello”，且不缓存结果</td>
</tr>
<tr>
<td>hello(?!AA)</td>
<td>不能匹配 “helloAA……” 中的 “hello”，但是可以匹配 “helloBB……” 中的 “hello”，且不缓存结果</td>
</tr>
<tr>
<td>(?&lt;=AA)hello</td>
<td>可以匹配 “AAhello……” 中的 “hello”，但是不能匹配 “BBhello……” 中的 “hello”，且不缓存结果</td>
</tr>
<tr>
<td>(?&lt;!AA)hello</td>
<td>不能匹配 “AAhello……” 中的 “hello”，但是可以匹配 “BBhello……” 中的 “hello”，且不缓存结果</td>
</tr>
</tbody></table>
<br>

<h2 id="贪婪"><a href="#贪婪" class="headerlink" title="贪婪"></a>贪婪</h2><p>贪婪是编程和算法中常见的概念，意思是越多越好。</p>
<p>* 和 + 这两个限定符都是贪婪的，如果用 <code>hello*</code> 或者 <code>hello+</code> 来匹配 <code>hellooooooo</code>，它们的匹配结果都是 <code>hellooooooo</code>，而不是 <code>hell</code>、 <code>hello</code> 或 <code>hellooo</code> 或是其他的。</p>
<p>在 * 和 + 后面加上 ? 就可以使匹配结果是非贪婪的（最小匹配）。按照上面的例子，<code>hello*?</code> 匹配的结果是 <code>hell</code>，<code>hello+?</code> 匹配的结果是 <code>hello</code>。</p>
<br>

<hr>
<p>写几个看到过的正则表达式，举几个例子</p>
<ul>
<li><p>身份证校验（简易版）</p>
<p><code>^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$</code></p>
</li>
<li><p>不能包含数字</p>
<p><code>^[^\d]+$</code></p>
</li>
<li><p>浮点数</p>
<p><code>^(-?\d+)(\.\d+)?$</code></p>
</li>
<li><p>域名</p>
<p><code>^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$</code></p>
</li>
</ul>
<br>

<hr>
<p>学习过正则表达式的基本语法之后，感觉在工作中还是不够用，还要学习 Java 中正则表达式的使用。</p>
<p>正则表达式从 JDK 1.4 之后出现，涉及到两个新类：Pattern 和 Matcher。Pattern 类代表一个正则表达式，而 Matcher 类代表一个正则表达式对一个字符串进行校验后的结果，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则表达式，规则：不能包含数字</span></span><br><span class="line">String regex = <span class="string">"^[^\\d]+$"</span>;</span><br><span class="line">Pattern compile = Pattern.compile(regex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配abcABC?&amp;</span></span><br><span class="line">String str = <span class="string">"abcABC?&amp;"</span>;</span><br><span class="line">Matcher matcher = compile1.matcher(str);</span><br></pre></td></tr></table></figure>

<p>Pattern 类没有（对外的）构造方法，因此生成一个 pattern 对象只能通过 Pattern 类的静态方法。</p>
<p>如果只是想检验字符串是否符合要求（即只需要一个boolean值），那么使用 Pattern 类的静态方法就可以，pattern 对象是为了更多操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String regex = <span class="string">"^[^\\d]+$"</span>;</span><br><span class="line">String str = <span class="string">"abcABC?&amp;"</span>;</span><br><span class="line"><span class="keyword">boolean</span> pass = Pattern.matches(regex, str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ------结果：pass:true</span></span><br></pre></td></tr></table></figure>

<p>Pattern 类多实现一些，用代码实现正则表达式的功能，而不是完全只用字符串来实现。例如它能指定正则表达式可以同时匹配大小写字母（指定后，正则表达式字符串即使只有 ‘a’，匹配时也可以同时匹配 ‘a’ 和 ‘A’），又或者可以用指定正则表达式分隔字符串，例如将一串带有数字的字符串，以数字为分隔拆分成多个子字符串。</p>
<p>Matcher 类多实现一些对匹配结果的处理，这一部分具体没怎么看，需要时再补吧。</p>
<p>最后提一句，Java 中使用正则表达式时，基本上要出现 <code>\</code> 的地方，都要转义成 <code>\\</code>，例如 <code>\d</code> -&gt; <code>\\d</code>。</p>
<p>本周就学习到这里了。</p>
<br>














  </div>
</article>



    </div>
    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 pz
  </div>
  <div class="footer-right">
    <nav>
      pz阁下的blog
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-37473492-6', 'auto');
        ga('send', 'pageview');
    </script>



